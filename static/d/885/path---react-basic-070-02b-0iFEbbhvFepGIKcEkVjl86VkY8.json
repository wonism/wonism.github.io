{"data":{"markdownRemark":{"id":"07261175-99cb-5ce1-9a0e-0862c0ebb9aa >>> MarkdownRemark","html":"<p>참고 : 이 문서는 <a href=\"https://github.com/reactjs/react-basic\">react-basic</a> 을 번역한 것으로 의역 혹은 오역이 있을 수 있음을 참고바랍니다.</p>\n<p>이 문서는 필자의 React 모델에 대한 이해를 설명하기 위한 문서이다.\n이 디자인을 이끄는 연역적 추론의 관점에서 이를 설명하고자 한다.</p>\n<p>분명 논쟁의 여지가 있는 몇 가지 전제가 있을 수 있으며, 예제의 실제 디자인은 버그나 틈이 있을 수 있다.\n이 예제는 단지 공식화의 시작이며,\n어떻게 공식화하는 지에 대한 더 좋은 아이디어가 있다면 망설이지 말고 <a href=\"https://github.com/reactjs/react-basic/pulls\">Pull Request</a>를 보내주길 바란다.\n단순 > 복잡으로의 진행은 너무 많은 라이브러리 세부사항 없이도 합당해야 한다.</p>\n<p>리액트의 실제 구현은 실용적인 솔루션, 점진적 단계, 알고리즘 최적화, 레거시 코드, 디버깅 툴 및 실제로 유용하게 만드는 데 필요한 것들로 구성되어있다.\n그러한 것들은 순간적이며, 시간이 흐름에 따라 더 효율적이고 높은 우선 순위를 가지는 것들과 바뀔 수 있다.\n실제 구현은 추론하기가 매우 어렵다.</p>\n<p>나는 내가 생각할 수 있는 더 단순한 이해를 하고 싶다.</p>\n<h2>변형</h2>\n<p>리액트의 핵짐 전제는 UI가 단순히 데이터를 다른 형식의 데이터로 투영한다는 것이다.\n동일한 입력은 항상 동일한 결과를 출력하며, 단순한 순수 함수이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> fontWeight<span class=\"token punctuation\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span> labelContent<span class=\"token punctuation\">:</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"hljs-text\"><code class=\"hljs-text\">&#39;Sebastian Markbåge&#39; -&gt;\n{ fontWeight: &#39;bold&#39;, labelContent: &#39;Sebastian Markbåge&#39; };</code></pre>\n      </div>\n<h2>추상</h2>\n<p>하나의 함수에 복잡한 UI를 넣을 수 없다.\nUI를 재사용 가능한 부분으로 추상화하는 것이 중요하며, 재사용 가능한 부분은 구현 세부 사항을 누설하지 않는다.\n하나의 함수를 다른 함수에서 호출한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderStyle<span class=\"token punctuation\">:</span> <span class=\"token string\">'1px solid blue'</span><span class=\"token punctuation\">,</span>\n    childContent<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"hljs-text\"><code class=\"hljs-text\">{ firstName: &#39;Sebastian&#39;, lastName: &#39;Markbåge&#39; } -&gt;\n{\n  borderStyle: &#39;1px solid blue&#39;,\n  childContent: [\n    &#39;Name: &#39;,\n    { fontWeight: &#39;bold&#39;, labelContent: &#39;Sebastian Markbåge&#39; }\n  ]\n};</code></pre>\n      </div>\n<h2>구성</h2>\n<p>진정으로 재사용할 수 있는 기능을 구성하기 위해서는 단순히 재사용 가능한 것들을 사용하는 것만으로는 충분하지 않다.\n그들을 위한 새로운 컨테이너를 구성해야 한다.\n또한, 다른 추상화를 구성하는 컨테이너에서 추상화를 구성할 수 있어야 한다.\n내가 구성에 대해 생각하는 방식은 둘 이상의 다른 추상화를 새로운 추상화로 결합하는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderStyle<span class=\"token punctuation\">:</span> <span class=\"token string\">'1px solid blue'</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> children\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">UserBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h2>상태</h2>\n<p>UI는 단순히 서버와 비지니스 로직의 상태에 대한 사본이 아니다.\n실제로 정확한 투영과 관련이 있는 상태가 많이 있으며, 다른 투영과는 관련이 없다.\n예를 들어 텍스트 필드에 입력을 하면, 다른 탭이나 모바일 기기에 복제되거나 복제되지 않을 수 있다.\n스크롤 위치는 여러 투영 사이에 거의 복제되지 않는 전형적인 예이다.</p>\n<p>우리는 데이터 모델이 불변하기를 선호하는 경향이 있다.\n우리는 맨 위에 있는 단일 원자로써 상태를 업데이트 할 수 있는 함수를 쓰레드한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> likes<span class=\"token punctuation\">,</span> onClick<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">NameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Likes: '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">LikeBox</span><span class=\"token punctuation\">(</span>likes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">LikeButton</span><span class=\"token punctuation\">(</span>onClick<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Implementation Details</span>\n\n<span class=\"token keyword\">var</span> likes <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">addOneMoreLike</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  likes<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">rerender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Init</span>\n\n<span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> firstName<span class=\"token punctuation\">:</span> <span class=\"token string\">'Sebastian'</span><span class=\"token punctuation\">,</span> lastName<span class=\"token punctuation\">:</span> <span class=\"token string\">'Markbåge'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  likes<span class=\"token punctuation\">,</span>\n  addOneMoreLike\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>참고 : 이 예제는 상태를 업데이트하기 위해 사이드 이펙트를 사용한다.\n실제 리액트의 모델은 업데이트 과정에서 다음 버전의 상태를 반환한다.\n위의 코드처럼 설명하는 것이 더 간단하지만, 미래에 이 예제를 바꾸고자 한다.</p>\n<h2>메모이제이션</h2>\n<p>어떤 함수가 순수하다는 것을 아는 상태에서 그 함수를 반복해서 호출하는 것은 낭비이다.\n마지막 인자와 마지막 결과를 추적하는 메모이즈된 버전의 함수를 만들 수 있다.\n이렇게 하면 같은 값을 넘겨받는 함수를 다시 실행할 필요가 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> cachedArg<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> cachedResult<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedArg <span class=\"token operator\">===</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cachedResult<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    cachedArg <span class=\"token operator\">=</span> arg<span class=\"token punctuation\">;</span>\n    cachedResult <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> cachedResult<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> MemoizedNameBox <span class=\"token operator\">=</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>NameBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">NameAndAgeBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> currentTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Name: '</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">MemoizedNameBox</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">.</span>lastName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Age in milliseconds: '</span><span class=\"token punctuation\">,</span>\n    currentTime <span class=\"token operator\">-</span> user<span class=\"token punctuation\">.</span>dateOfBirth\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>역자 주 : <a href=\"https://wonism.github.io/memoization/\">메모이제이션에 대해 작성한 글</a>을 보면 더 자세히 알 수 있다.</p>\n<h2>리스트</h2>\n<p>대부분의 UI는 목록에 있는 각 항목에 대해 여러 값을 만드는 어떤 형태의 목록이다.\n이것은 자연적인 계층 구조를 만든다.</p>\n<p>목록에 있는 각 항목에 대한 상태를 관리하기 위해 특정 항목의 상태를 유지하는 <code class=\"hljs-text\">Map</code>을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> <span class=\"token function\">FancyNameBox</span><span class=\"token punctuation\">(</span>\n    user<span class=\"token punctuation\">,</span>\n    likesPerUser<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">updateUserLikes</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> likesPerUser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">updateUserLikes</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> likeCount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  likesPerUser<span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> likeCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">rerender</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">,</span> likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>참고 : 이제 <code class=\"hljs-text\">FancyNameBox</code>에 전달되는 여러 다른 인자들이 있다.\n여러 다른 인자들과 함께 호출되는 함수로 하여금 메모이제이션을 깨지게 하는데, 한 번에 하나의 값만 기억할 수 있기 때문이다.\n아래에 더 자세한 내용이 후술된다.</p>\n<h2>연속성</h2>\n<p>불행히도, UI 목록에는 너무 많은 목록이 있어서 명시적으로 관리해야하는 상용구 코드가 많아진다.</p>\n<p>함수의 실행을 연기함으로써 상용구 코드의 일부를 중요 비지니스 로직 바깥으로 옮기는 것이 가능하다.\n예를 들어, <code class=\"hljs-text\">Partial Application</code>을 사용할 수 있다.\n그 다음, 상용구 코드로 부터 자유로워진 핵심 함수의 외부로부터 상태를 전달한다.</p>\n<p>역자 주 : 원 글에서는 <code class=\"hljs-text\">Partial Application</code>이 아닌 <code class=\"hljs-text\">Currying</code>이라고 되어있다. 하지만 커링이라면, <code class=\"hljs-text\">box.children(likesPerUser)(updateUserLikes)</code>과 같이 코드가 작성되어야 한다. 이 외에도 <code class=\"hljs-text\">bind</code> 에 대한 링크가 추가되어 있는데, 별 관련성이 없다고 생각하기 때문에 제거하였다. 커링과 파셜 애플리케이션의 차이는 <a href=\"https://codeburst.io/javascript-currying-vs-partial-application-4db5b2442be8\">Javascript- Currying VS Partial Application</a>에서 더 자세하게 볼 수 있다.</p>\n<p>이것은 상용구 코드를 줄이진 않지만, 중요한 비지니스 로직 바깥으로 벗어나야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    UserList<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> box <span class=\"token operator\">=</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resolvedChildren <span class=\"token operator\">=</span> box<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span>likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resolvedBox <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>box<span class=\"token punctuation\">,</span>\n  children<span class=\"token punctuation\">:</span> resolvedChildren\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h2>상태 Map</h2>\n<p>앞서 우리는 반복되는 패턴을 볼 때 같은 패턴을 다시 구현하는 것을 피하기 위해 구성을 할 수 있다는 것을 안다.\n상태를 추출하고 전달하는 로직을 재사용되는 저수준 함수로 옮길 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FancyBoxWithState</span><span class=\"token punctuation\">(</span>\n  children<span class=\"token punctuation\">,</span>\n  stateMap<span class=\"token punctuation\">,</span>\n  updateState\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>child <span class=\"token operator\">=></span> child<span class=\"token punctuation\">.</span><span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>\n      stateMap<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      updateState\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>user <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    continuation<span class=\"token punctuation\">:</span> FancyNameBox<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    key<span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>id\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> FancyBoxWithState<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">UserList</span><span class=\"token punctuation\">(</span>users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> continuation <span class=\"token operator\">=</span> <span class=\"token function\">FancyUserList</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>likesPerUser<span class=\"token punctuation\">,</span> updateUserLikes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h2>메모이제이션 Map</h2>\n<p>목록에 있는 여러 항복을 메모이즈하는 것은 상당히 어렵다.\n메모리 사용량과 빈도 사이의 균형을 맞추는 복잡한 캐싱 알고리즘을 찾아야 한다.</p>\n<p>다행히도, UI는 동일한 위치에서 안정되려는 경향이 있다.\n트리의 같은 위치는 항상 같은 값을 가지며, 이 트리는 메모이제이션에 유용한 전략임이 밝혀졌다.</p>\n<p>우리는 상태에 사용했던 것과 동일한 트릭을 사용할 수 있으며, 구성 가능한 함수를 통해 메모이제이션 캐시를 전달할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">,</span> memoizationCache<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>memoizationCache<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">===</span> arg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> memoizationCache<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    memoizationCache<span class=\"token punctuation\">.</span>arg <span class=\"token operator\">=</span> arg<span class=\"token punctuation\">;</span>\n    memoizationCache<span class=\"token punctuation\">.</span>result <span class=\"token operator\">=</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyBoxWithState</span><span class=\"token punctuation\">(</span>\n  children<span class=\"token punctuation\">,</span>\n  stateMap<span class=\"token punctuation\">,</span>\n  updateState<span class=\"token punctuation\">,</span>\n  memoizationCache\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>\n    children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>child <span class=\"token operator\">=></span> child<span class=\"token punctuation\">.</span><span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span>\n      stateMap<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      updateState<span class=\"token punctuation\">,</span>\n      memoizationCache<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> MemoizedFancyNameBox <span class=\"token operator\">=</span> <span class=\"token function\">memoize</span><span class=\"token punctuation\">(</span>FancyNameBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h2>대수학 효과</h2>\n<p>여러 수준의 추상화를 통해 필요한 모든 작은 값을 전달하는 것은 PITA와 같은 것으로 밝혀졌다.\n중간 생성자를 포함하지 않은 채 두 추상화 사이에서 무언가를 전달하기 위한 지름길을 갖는 것이 때때로 바람직하다.\n리액트에서는 이것을 <code class=\"hljs-text\">컨텍스트</code>라고 부른다.</p>\n<p>역자 주 : PITA의 뜻이 뭔지 찾아봤는데, 알아내지 못했다. 원문은 다음과 같다.<br />\nIt turns out that it is kind of a PITA to pass every little value you might need through several levels of abstractions.</p>\n<p>때로는 데이터 종속성이 추상화 트리를 완전히 따르지 않는 경우가 있다.\n예를 들어, 레이아웃 알고리즘에서 하위의 크기를 알아야 그들의 위치를 완전하게 이행할 수 있다.</p>\n<p>이제, 이 예제는 조금 바깥에 있다.\n<a href=\"https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers\">ECMAScript</a>에 제안된 <a href=\"http://math.andrej.com/eff/\">대수학 효과</a>를 사용하겠다.\n함수형 프로그래밍에 익숙하다면 모나드에 의해 부과된 중간 식을 피할 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\">\n      <pre class=\"hljs-js\"><code class=\"hljs-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">ThemeBorderColorRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FancyBox</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> color <span class=\"token operator\">=</span> raise <span class=\"token keyword\">new</span> <span class=\"token class-name\">ThemeBorderColorRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    borderWidth<span class=\"token punctuation\">:</span> <span class=\"token string\">'1px'</span><span class=\"token punctuation\">,</span>\n    borderColor<span class=\"token punctuation\">:</span> color<span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> children\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">BlueTheme</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> effect ThemeBorderColorRequest <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> continuation<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">continuation</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">BlueTheme</span><span class=\"token punctuation\">(</span>\n    FancyUserList<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>","frontmatter":{"title":"React - 기본적인 이론 컨셉","path":"/react-basic/","images":["images/reactjs.jpg"],"category":"JavaScript","tags":["javascript","reactjs"],"date":"2018-08-15T20:34:38.000Z","components":null,"tweets":null,"summary":"이 문서는 필자의 React 모델에 대한 이해를 설명하기 위한 문서이다. 이 디자인을 이끄는 연역적 추론의 관점에서 이를 설명하고자 한다."}}},"pageContext":{}}